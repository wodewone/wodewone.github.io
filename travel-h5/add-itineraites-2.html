<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="#eb6542">
    <meta name="theme-color" content="#eb6542">
    <title>添加行程 - 2</title>
    <link rel="stylesheet" href="css/sm.min.css">
    <link rel="stylesheet" href="css/sm-extend.min.css">

    <link rel="stylesheet" href="style/base.css"/>
    <link rel="stylesheet" href="style/base-icon.css"/>
</head>
<body>
<div class="page">
    <header class="bar bar-nav m-bg">
        <a class="button button-link button-nav pull-right open-popup" data-popup=".popup-step-1" href="javascript:;"><i class="iconfont icon-plus"></i></a>
        <h1 class="title">Destinations - # of Days</h1>
    </header>
    <nav class="bar bar-tab d-before small-pt bg-white">
        <a class="block text-center m-color pad5" href="add-itineraites-3.html">Next</a>
    </nav>
    <div class="content bg-gray">
        <div class="main-content">
            <div class="list-block mb5 por dividing d-after">
                <ul>
                    <li class="item-content pr5">
                        <div class="item-media fz3"><i class="iconfont icon-date mr5" style="font-size: 1.2rem;;"></i>Select trip start date:</div>
                        <div class="por i-arrow pr5">
                            <input class="item-input pr5 input-date text-right" readonly type="text"/>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="bg-white list-block por dividing d-before">
                <ul class="date-choose-list">
                    <li class="item-content pad5 por dividing d-after">
                        <div class="item-title">Bei Jing 北京</div>
                        <div class="item-after">
                            <div class="small-radius date-action-box">
                                <a class="txt-black prev-btn date-btn fz3 por dividing d-right" href="javascript:;"><i class="iconfont icon-jian"></i></a>
                                <div class="date-day fz3"><span class="val">1</span> Days</div>
                                <a class="txt-black next-btn date-btn fz3 por dividing d-left" href="javascript:;"><i class="iconfont icon-plus"></i></a>
                            </div>
                            <a class="block ml5 delete-btn" href="javascript:;"><i class="iconfont txt-black icon-delete fz2"></i></a>
                        </div>
                    </li>
                    <li class="item-content pad5 por dividing d-after">
                        <div class="item-title">Bei Jing 北京</div>
                        <div class="item-after">
                            <div class="small-radius date-action-box">
                                <a class="txt-black prev-btn date-btn fz3 por dividing d-right" href="javascript:;"><i class="iconfont icon-jian"></i></a>
                                <div class="date-day fz3"><span class="val">1</span> Days</div>
                                <a class="txt-black next-btn date-btn fz3 por dividing d-left" href="javascript:;"><i class="iconfont icon-plus"></i></a>
                            </div>
                            <a class="block ml5 delete-btn" href="javascript:;"><i class="iconfont txt-black icon-delete fz2"></i></a>
                        </div>
                    </li>
                    <li class="item-content pad5 por dividing d-after">
                        <div class="item-title">Bei Jing 北京</div>
                        <div class="item-after">
                            <div class="small-radius date-action-box">
                                <a class="txt-black prev-btn date-btn fz3 por dividing d-right" href="javascript:;"><i class="iconfont icon-jian"></i></a>
                                <div class="date-day fz3"><span class="val">1</span> Days</div>
                                <a class="txt-black next-btn date-btn fz3 por dividing d-left" href="javascript:;"><i class="iconfont icon-plus"></i></a>
                            </div>
                            <a class="block ml5 delete-btn" href="javascript:;"><i class="iconfont txt-black icon-delete fz2"></i></a>
                        </div>
                    </li>
                    <li class="item-content pad5 por dividing d-after">
                        <div class="item-title">Bei Jing 北京</div>
                        <div class="item-after">
                            <div class="small-radius date-action-box">
                                <a class="txt-black prev-btn date-btn fz3 por dividing d-right" href="javascript:;"><i class="iconfont icon-jian"></i></a>
                                <div class="date-day fz3"><span class="val">1</span> Days</div>
                                <a class="txt-black next-btn date-btn fz3 por dividing d-left" href="javascript:;"><i class="iconfont icon-plus"></i></a>
                            </div>
                            <a class="block ml5 delete-btn" href="javascript:;"><i class="iconfont txt-black icon-delete fz2"></i></a>
                        </div>
                    </li>
                    <li class="item-content pad5 por dividing d-after">
                        <div class="item-title">Bei Jing 北京</div>
                        <div class="item-after">
                            <div class="small-radius date-action-box">
                                <a class="txt-black prev-btn date-btn fz3 por dividing d-right" href="javascript:;"><i class="iconfont icon-jian"></i></a>
                                <div class="date-day fz3"><span class="val">1</span> Days</div>
                                <a class="txt-black next-btn date-btn fz3 por dividing d-left" href="javascript:;"><i class="iconfont icon-plus"></i></a>
                            </div>
                            <a class="block ml5 delete-btn" href="javascript:;"><i class="iconfont txt-black icon-delete fz2"></i></a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="popup popup-step-1">
    <header class="bar bar-nav m-bg">
        <a class="button button-link button-nav pull-right close-popup" href="javascript:;"><i class="iconfont icon-article-back"></i></a>
        <h1 class="title">Select Your Destinations</h1>
    </header>
    <nav class="bar bar-tab d-before m-bg">
        <div class="small-pt small-bt row">
            <div class="col-75 overflow-hidden">
                <div class="itit-nav">
                </div>
            </div>
            <div class="col-25 ml5 pull-right text-center small-pt small-bt por dividing d-left white-color fz4">
                <div class="itit-val">0</div>destinations
            </div>
        </div>
    </nav>
    <div class="content bg-gray">
        <div class="main-content">
            <div class="searchbar pad5 por dividing d-after">
                <div class="search-input por">
                    <a class="search-btn" href="javascript:;"><i class="iconfont icon-search"></i></a>
                    <input type="search" placeholder="Enter keyword">
                </div>
            </div>
            <div class="list-block media-list bg-white">
                <ul class="step-place-list">
                    <li class="item-content itit-item pl5 por dividing d-after">
                        <div class="item-media">
                            <div class="por">
                                <img width="60" height="60" src="images/demo/m-1.jpg" alt=""/>
                                <div class="title-rgb">
                                    <i class="check iconfont icon-right"></i>
                                </div>
                            </div>
                        </div>
                        <div class="item-inner no-dividing">
                            <div class="item-title-row">
                                <div class="item-title">
                                    <p class="txt-blue name">BeiJing</p>
                                    <p class="fz3 txt-gray">1 user has been here</p>
                                </div>
                                <a  class="item-after pr5"><i class="iconfont icon-add icon-big txt-gray"></i></a>
                            </div>
                        </div>
                    </li>
                    <li class="item-content itit-item pl5 por dividing d-after">
                        <div class="item-media">
                            <div class="por">
                                <img width="60" height="60" src="images/demo/m-1.jpg" alt=""/>
                                <div class="title-rgb">
                                    <i class="check iconfont icon-right"></i>
                                </div>
                            </div>
                        </div>
                        <div class="item-inner no-dividing">
                            <div class="item-title-row">
                                <div class="item-title">
                                    <p class="txt-blue name">BeiJing</p>
                                    <p class="fz3 txt-gray">1 user has been here</p>
                                </div>
                                <a  class="item-after pr5"><i class="iconfont icon-add icon-big txt-gray"></i></a>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<script type='text/javascript' src='js/zepto.min.js' charset='utf-8'></script>
<script type='text/javascript' src='js/sm.min.js' charset='utf-8'></script>
<script type='text/javascript' src='js/sm-extend.min.js' charset='utf-8'></script>
<script type='text/javascript' src='js/base.js' charset='utf-8'></script>
<script>
    $(function(){
        step1();
        stepDateEvent();
    });

    function stepDateEvent(){
        $.each($('.date-choose-list li'),function(index,obj){
            var $val = $(obj).find('.val');
            $(obj).find('.prev-btn').off().on('click',function(){
                var num = Number($val.html()) || 1;
                $val.html(num <= 1?1:num-1);
            });
            $(obj).find('.next-btn').off().on('click',function(){
                var num = Number($val.html()) || 1;
                $val.html(num >= 99?99:num+1);
            });
            $(obj).find('.delete-btn').off().on('click',function(){
                $(obj).remove();
            });
        });
    }

    function step1(){
        $('.step-place-list').on('click', '.itit-item', function(){
            var titleName = $(this).find('.name').html();
            var dataIndex = $(this).index();
            if($(this).toggleClass('active'), $(this).hasClass('active')){
                $('.itit-nav').append('<a class="itit-span m-color" data-index="'+ dataIndex +'" href="javascript:;">'+ titleName +' <span class="close-btn"><i class="iconfont icon-guanbi txt-gray"></i></span></a>');
            }else{
                $('.itit-nav [data-index="'+ dataIndex +'"]').remove();
            }
            checkItitNum();
        });
        $('.itit-nav').on('click','.itit-span',function(){
            $(this).remove();
            var index = $(this).attr('data-index');
            $('.step-place-list .itit-item').eq(index).removeClass('active');
            checkItitNum();
        });
    }
    function checkItitNum(){
        var num = $('.itit-nav .itit-span').length || 0;
        $('.itit-val').html(num);
    }
</script>
</body>
</html>